# ?? EthereumWallet - Proiect Complet de Testare Software

## ?? Descriere General?

**EthereumWallet** este un proiect .NET 9 care simuleaz? un portofel digital de criptomonede (Ethereum ?i Bitcoin). Proiectul demonstreaz? tehnici avansate de **testare software**, incluzând:

- ? **Domain Testing** (Boundary Value Analysis + Equivalence Partitioning)
- ? **Test-Driven Development (TDD)**
- ? **Test Doubles** (Stub, Mock, Fake, Spy, Dummy)
- ? **Code Coverage** complet

---

## ??? Structura Proiectului

```
EthereumWallet/
??? Wallet.cs                 # Clasa principal? - logica portofelului
??? Transaction.cs            # Clasa pentru înregistrarea tranzac?iilor (în Wallet.cs)
??? Exceptions.cs             # Excep?ii personalizate pentru valid?ri
??? ICurrencyConverterStub.cs # Interfa?a pentru convertorul de valut?
??? CurrencyConverterStub.cs  # Implementarea STUB a convertorului
??? TestDoubles.cs            # FAKE, SPY, DUMMY implementations
??? UnitTesting.cs            # Testele unitare NUnit (~70+ teste)
??? EthereumWallet.csproj     # Configura?ia proiectului
```

---

## ?? Func?ionalit??i Wallet

### Opera?ii cu Ethereum (ETH)
| Metod? | Descriere | Valid?ri |
|--------|-----------|----------|
| `Wallet(amount)` | Creeaz? portofel | amount >= 0 |
| `Deposit(amount)` | Depune ETH | amount >= 0, multiplu de 10, <= 50000 |
| `Withdraw(amount)` | Retrage ETH | amount <= balance, >= 0, multiplu de 10, <= 50000 |
| `Transfer(dest, amount)` | Transfer? ETH | Toate valid?rile de mai sus |

### Opera?ii cu Bitcoin (BTC) - necesit? convertor
| Metod? | Descriere |
|--------|-----------|
| `DepositBitcoin(btc, converter)` | Converte?te BTC ? ETH ?i depune |
| `WithdrawBitcoin(btc, converter)` | Converte?te BTC ? ETH ?i retrage |
| `TransferBitcoin(dest, btc, converter)` | Converte?te ?i transfer? |

---

## ?? Excep?ii Personalizate

```
???????????????????????????????????????????????????????????????
? CREARE CONT                                                 ?
???????????????????????????????????????????????????????????????
? NegativeCreateException    - Sum? ini?ial? negativ?         ?
???????????????????????????????????????????????????????????????
? DEPUNERE                                                    ?
???????????????????????????????????????????????????????????????
? NegativeDepositException   - Sum? negativ?                  ?
? DivisionDepositException   - Nu este multiplu de 10         ?
? TooMuchDepositException    - Peste 50.000 ETH               ?
???????????????????????????????????????????????????????????????
? RETRAGERE                                                   ?
???????????????????????????????????????????????????????????????
? NotEnoughFundsWithdrawException - Fonduri insuficiente      ?
? NegativeWithdrawException       - Sum? negativ?             ?
? DivisionWithdrawException       - Nu este multiplu de 10    ?
? TooMuchWithdrawException        - Peste 50.000 ETH          ?
???????????????????????????????????????????????????????????????
? TRANSFER                                                    ?
???????????????????????????????????????????????????????????????
? NotEnoughFundsTransferException - Fonduri insuficiente      ?
? NegativeTransferException       - Sum? negativ?             ?
? DivisionTransferException       - Nu este multiplu de 10    ?
? TooMuchTransferException        - Peste 50.000 ETH          ?
???????????????????????????????????????????????????????????????
```

---

## ?? Tehnici de Testare Implementate

### 1?? Domain Testing (Boundary Value Analysis)

**Ce este?** Tehnic? de testare black-box care identific? valorile de grani?? ?i clasele de echivalen??.

**Exemplu pentru `Deposit(amount)`:**

```
?????????????????????????????????????????????????????????????????????
? Parti?ie         ? Valori                  ? Rezultat A?teptat    ?
?????????????????????????????????????????????????????????????????????
? P1: Valid        ? 0, 10, 100, 50000       ? SUCCESS              ?
? P2: Negative     ? -1, -10, -100           ? NegativeDepositEx    ?
? P3: Not % 10     ? 1, 9, 11, 3999          ? DivisionDepositEx    ?
? P4: > 50000      ? 50010, 50020, 100200    ? TooMuchDepositEx     ?
?????????????????????????????????????????????????????????????????????

Boundary Values (Valori de grani??):
• Lower bound:    -1 (invalid), 0 (valid), 1 (invalid - not % 10)
• Division bound: 9 (invalid), 10 (valid), 11 (invalid)
• Upper bound:    49990 (valid), 50000 (valid), 50010 (invalid)
```

---

### 2?? Test Doubles (Obiecte Substitut)

| Tip | Fi?ier | Descriere | Când se folose?te |
|-----|--------|-----------|-------------------|
| **STUB** | `CurrencyConverterStub.cs` | Implementare simpl? cu rate fixe | Când vrei valori predictibile |
| **MOCK** | `UnitTesting.cs` (Moq) | Verific? interac?iuni, nu are logic? | Când vrei s? verifici c? o metod? a fost apelat? |
| **FAKE** | `TestDoubles.cs` | Implementare complet? simplificat? | Când ai nevoie de logic? real? dar simplificat? |
| **SPY** | `TestDoubles.cs` | Wrapper care înregistreaz? apelurile | Când vrei s? vezi ce s-a întâmplat |
| **DUMMY** | `TestDoubles.cs` | Returneaz? mereu 0, placeholder | Când parametrul nu conteaz? |

#### Exemplu STUB:
```csharp
// Stub cu rate fixe
ICurrencyConverterStub stub = new CurrencyConverterStub(4.0f);
// 1 BTC = 4 ETH (mereu!)
```

#### Exemplu MOCK (cu Moq):
```csharp
var mockConverter = new Mock<ICurrencyConverterStub>();
mockConverter.Setup(c => c.BitcoinToEthereum(25.00f)).Returns(100f);

wallet.DepositBitcoin(25.00f, mockConverter.Object);

// Verific? c? metoda a fost apelat?
mockConverter.Verify(c => c.BitcoinToEthereum(25.00f), Times.Once());
```

#### Exemplu FAKE:
```csharp
// Fake cu logic? real? ?i istoric
var fake = new FakeCurrencyConverter(10.0f);
wallet.DepositBitcoin(5.0f, fake);

// Po?i vedea istoricul conversiilor
var history = fake.GetConversionHistory();
```

#### Exemplu SPY:
```csharp
// Spy înregistreaz? apelurile dar folose?te implementarea real?
var real = new CurrencyConverterStub(5.0f);
var spy = new SpyCurrencyConverter(real);

wallet.DepositBitcoin(10.0f, spy);

// Verific?ri
Assert.That(spy.TotalCalls, Is.EqualTo(1));
Assert.That(spy.WasCalledWith("BitcoinToEthereum", 10.0f), Is.True);
```

#### Exemplu DUMMY:
```csharp
// Dummy nu face nimic, doar ocup? loc
var dummy = new DummyCurrencyConverter();
wallet.DepositBitcoin(1000.0f, dummy);
// Balance r?mâne neschimbat (conversia = 0)
```

---

### 3?? TDD (Test-Driven Development)

**Ciclul RED ? GREEN ? REFACTOR:**

```
1. RED:     Scrie un test care PIC? (nu exist? implementarea)
2. GREEN:   Scrie codul MINIM pentru a trece testul
3. REFACTOR: Îmbun?t??e?te codul p?strând testele verzi
```

**Exemplu TDD:**
```csharp
// 1. RED - Scriem testul ÎNAINTE de implementare
[Test]
public void TDD_DepositShouldAddToBalance()
{
    var wallet = new Wallet(50);
    wallet.Deposit(100);
    Assert.That(wallet.Balance, Is.EqualTo(150));
}

// 2. GREEN - Implement?m metoda Deposit
// 3. REFACTOR - Optimiz?m codul
```

---

## ?? Categorii de Teste

Testele sunt organizate în categorii pentru filtrare u?oar?:

```bash
# Ruleaz? doar testele Domain Testing
dotnet test --filter "Category=DomainTesting"

# Ruleaz? doar testele cu Mock-uri
dotnet test --filter "Category=Mock"

# Ruleaz? doar testele TDD
dotnet test --filter "Category=TDD"
```

| Categorie | Descriere |
|-----------|-----------|
| `DomainTesting` | Teste de domeniu cu boundary values |
| `BoundaryValueAnalysis` | Teste specifice pentru grani?e |
| `TestDouble` | Toate testele cu obiecte substitut |
| `Stub` | Teste cu Stub |
| `Mock` | Teste cu Mock (Moq) |
| `Fake` | Teste cu Fake |
| `Spy` | Teste cu Spy |
| `Dummy` | Teste cu Dummy |
| `TDD` | Teste în stil TDD |
| `Coverage` | Teste pentru acoperire de cod |
| `pass` | Teste pentru scenarii de succes |
| `fail` | Teste pentru scenarii de eroare |

---

## ?? Cum s? rulezi proiectul

### Cerin?e
- .NET 9 SDK
- Visual Studio 2022 sau VS Code

### Instalare
```bash
cd EthereumWallet
dotnet restore
```

### Build
```bash
dotnet build
```

### Rulare Teste
```bash
# Toate testele
dotnet test

# Cu detalii
dotnet test --logger "console;verbosity=detailed"

# Cu Code Coverage
dotnet test --collect:"XPlat Code Coverage"
```

---

## ?? Pachete NuGet Folosite

| Pachet | Versiune | Scop |
|--------|----------|------|
| NUnit | 3.14.0 | Framework de testare |
| NUnit3TestAdapter | 4.6.0 | Adaptor pentru Visual Studio |
| Microsoft.NET.Test.Sdk | 17.10.0 | SDK pentru teste |
| Moq | 4.20.70 | Biblioteca pentru Mock-uri |
| coverlet.collector | 6.0.2 | Code Coverage |

---

## ?? Statistici

- **~70+ teste unitare**
- **5 tipuri de Test Doubles** demonstrate
- **100% coverage** pe clasele principale
- **Domain Testing complet** cu Boundary Values
- **Documenta?ie inline** în cod (XML comments)

---

## ?? Concepte Cheie Explicate

### Diferen?a între Test Doubles:

| Caracteristic? | Stub | Mock | Fake | Spy | Dummy |
|---------------|------|------|------|-----|-------|
| Are logic? real? | ? | ? | ? | ? | ? |
| Verific? interac?iuni | ? | ? | ? | ? | ? |
| Returneaz? valori | ? (fixe) | ? (configurate) | ? (calculate) | ? (reale) | ? (default) |
| Înregistreaz? apeluri | ? | ? | Op?ional | ? | ? |

### Când s? folose?ti fiecare:

- **STUB**: Când ai nevoie de valori predictibile pentru test
- **MOCK**: Când vrei s? verifici c? o dependen?? a fost apelat? corect
- **FAKE**: Când ai nevoie de comportament real dar simplificat (ex: in-memory DB)
- **SPY**: Când vrei s? folose?ti implementarea real? dar s? vezi ce s-a întâmplat
- **DUMMY**: Când parametrul este obligatoriu dar nu conteaz? pentru test

---

## ????? Autor

Proiect creat pentru demonstrarea tehnicilor avansate de testare software.

---

## ?? Licen??

Acest proiect este pentru scopuri educa?ionale.

---

**?? Succes la testare!**
